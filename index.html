<!DOCTYPE html>

<html lang="en">


<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>Document</title>

    <link rel="stylesheet" href="style.css">
    <style>
        /* Interaction layer to capture first touch */
        #interaction-layer {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: transparent;
            z-index: 9999;
            cursor: pointer;
        }
    </style>
</head>


<body>




    <div id="interaction-layer"></div>

    <div class="flag">

        <div class="stripe saffron"></div>


        <div class="stripe white">

            <div class="login-box">

                <h2>LOGIN</h2>

                <input type="text" placeholder="Username">

                <input type="password" placeholder="Password">

                <button>SIGN IN</button>

                <p><a href="#">Forgot Password?</a></p>

                <p>Donâ€™t have an account? <a href="#">Register</a></p>

            </div>


            <div class="chakra-wrapper">

                <div class="chakra">

                    <script>

                        for (let i = 0; i < 24; i++) {

                            document.write(

                                `<div class="spoke" style="transform: rotate(${i * 15}deg);"></div>`

                            );

                        }

                    </script>

                </div>

            </div>


            <div>

                <img src="ganghi ji.png" alt="">

            </div>

        </div>



        <div class="stripe green"></div>

    </div>

    <!-- Patriotic Song Audio -->
    <audio id="bgAudio" loop>
        <source id="audioSrc" src="song.mp3" type="audio/mpeg">
        Your browser does not support the audio element.
    </audio>

    <script>
        const audio = document.getElementById('bgAudio');
        const interactionLayer = document.getElementById('interaction-layer');

        let audioCtx;
        let gainNode;
        let sourceNode;

        const initAudio = () => {
            if (!audioCtx) {
                // Initialize Web Audio API
                audioCtx = new (window.AudioContext || window.webkitAudioContext)();
                gainNode = audioCtx.createGain();
                sourceNode = audioCtx.createMediaElementSource(audio);

                // Connect source -> gain -> destination
                sourceNode.connect(gainNode);
                gainNode.connect(audioCtx.destination);

                // Set gain to max (1.0 is standard max, can go higher if needed)
                gainNode.gain.value = 1.0;
            }

            if (audioCtx.state === 'suspended') {
                audioCtx.resume();
            }

            audio.muted = false;
            audio.volume = 1.0;

            audio.play().then(() => {
                console.log("Web Audio Context initialized and playing");
                if (interactionLayer) interactionLayer.remove();
            }).catch((error) => {
                console.warn("Playback failed:", error);
            });
        };

        // Aggressive enforcement loop
        setInterval(() => {
            // Force standard audio properties (legacy/fallback)
            if (audio.volume !== 1.0) audio.volume = 1.0;
            if (audio.muted) audio.muted = false;

            // Force GainNode properties (Web Audio API)
            if (gainNode && gainNode.gain.value !== 1.0) {
                gainNode.gain.value = 1.0;
            }

            // Ensure physical playback is running
            if (audio.paused && !interactionLayer) {
                audio.play().catch(() => { });
            }

            // Ensure context is running
            if (audioCtx && audioCtx.state === 'suspended') {
                audioCtx.resume();
            }
        }, 100);

        // Capture any interaction
        if (interactionLayer) {
            interactionLayer.addEventListener('click', initAudio);
            interactionLayer.addEventListener('touchstart', initAudio);
        }

        // Fallback for any other window interaction
        ["click", "touchstart", "scroll", "keydown"].forEach(event => {
            window.addEventListener(event, initAudio, { once: true });
        });

        console.log("Strict Web Audio enforcement initialized.");
    </script>
</body>


</html>